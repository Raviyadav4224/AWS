1. Identity Acess Management (IAM) -

    It is a Global service which controls who can access AWS resources and what actions they can perform

    Users -

        People within an organization that can use AWS or AWS account for people
        * They do not have permission by default
        * Each user has a unique name and can have CONSOLE access (username/password) or 
         PROGRAMMATIC access(Aws CLI/SDK)
        * Never give user direct permission rather assign permissions via Groups or policies 
        User don't have to belong to a group or it can belong to Multiple groups

    Groups -

        Collection of IAM Users with shared permissions
        * Groups cannot be nested i.e groups cannot contain another groups

    Roles -

        These are temporary permissions to AWS Resources, services or applications
        IAM Roles do not have passwords or access keys

    Policies -

        These are JSON documents that define AWS permissions for Users , Groups or Roles
        It controls what action user or group can perform
        It can be AWS-Managed or Customer-Managed
        * In AWS we follow LEAST PREVILEGE principle i.e don't give more permissions than a user needs

    * IAM Policies are stored in JSON format and define who can access it

        * Effect -> Allow or Deny
        * Action -> AWS operations that are allowed or denied example s3:PutObject, ec2:DescribeInstances
        * Resource -> Which AWS resources are affected example arn:aws:s3:::my-bucket/*, 
                    arn:aws:ec2:::instance/i-12345678
        * Condition -> Given permissions conditionally

            example -

            1. Allows EC2 instance access during office hours only
                {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "ec2:StartInstances",
                                "ec2:StopInstances"
                            ],
                            "Resource": "*",
                            "Condition": {
                                "DateGreaterThan": {
                                    "aws:CurrentTime": "2025-03-25T09:00:00Z"
                                },
                                "DateLessThan": {
                                    "aws:CurrentTime": "2025-03-25T18:00:00Z"
                                }
                            }
                        }
                    ]
                }
                
            2. Allows user to access and list only specific folder in S3 bucket
                {
                    "Version": "2012-10-17",
                    "Statement": [
                        //List S3 bucket content within folder name reports/
                        {
                            "Effect": "Allow",
                            "Action": "s3:ListBucket",
                            "Resource": "arn:aws:s3:::my-secure-bucket",
                            "Condition": {
                                "StringLike": {
                                    "s3:prefix": "reports/*"
                                }
                            }
                        },

                        // Allows downloading files inside reports folder
                        {
                            "Effect": "Allow",
                            "Action": "s3:GetObject",
                            "Resource": "arn:aws:s3:::my-secure-bucket/reports/*"
                        }
                    ]
                }

    * IAM Policy Evaluation Logic -

        Explicit DENY always wins - If any policy explicitly denies an action, that action is 
            denied, even if other policy allows it

        If No allow is found, access is denied - If a policy does not explicitly allows an action,
            access is denied by default

        Implicit DENY applies by default - If No policies are attached, they get denied access by default
    
    IAM Security Tools -

        IAM Credentials Report (Account Level) -
            It lists all your account's users and their status of various credentials

        IAM Access Advisor (User Level) -
            It lists all the permissions granted to the user and when those were last accessed